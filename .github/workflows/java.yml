name: Java CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Set up JDK 1.8
      uses: actions/setup-java@v1
      with:
        java-version: 1.8
    - name: Find all *.java files
      run: cd src && find -name "*.java" > java_files.txt
    - name: Compile all Java files
      run: javac @java_files.txt
    - name: Run Project
      run: java -cp java Solution
    - name: Make manifest
      run: echo "Main-Class:Solution" > manifest.txt
    - name: Find all *.class files
      run: find -name "*.class" > class_files.txt
    - name: Make jar file
      run: jar cvfm PasswordVault.jar manifest.txt @class_files.txt